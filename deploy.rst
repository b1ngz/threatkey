.. _deploy:

蜜罐部署
========

帐号注册
--------
进入蜜罐首页，点击右上角内测申请，填写用户名和邮箱，点击提交申请，待后台审核通过后，会发送邀请链接到填写的邮箱，点击打开链接，根据页面提示完成注册。

基本概念
--------
Node(节点): 部署蜜罐的一台机器(服务器)成为一个节点

Honeypot(蜜罐): 一个蜜罐为一个存在漏洞的环境，内部运行着一个或多个服务，如

- elasticsearch蜜罐(单个服务): 运行着存在命令执行的elasticsearch服务的环境
- ssh_redis蜜罐(多个服务): 运行着弱口令的ssh服务和无需认证的redis服务

一个节点内可以部署多种蜜罐，因不同蜜罐会使用不同的端口(一个或多个)，如:

- elasticsearch蜜罐(单端口): 使用9200端口
- ssh_redis蜜罐(多端口): ssh服务使用22端口，redis服务使用6379端口

配置要求
--------
系统要求: 内核版本3.10+，可通过uname -a命令查看
推荐系统:

- Ubuntu 14.04 +
- Centos 7+

系统配置:

因系统配置依赖于节点内部署的蜜罐类型和个数

推荐 2 核 4 GB以上的配置，能够稳定运行4-5个蜜罐服务

磁盘要求:

磁盘大小同样依赖于节点内部署的蜜罐类型和个数

推荐50GB+的磁盘空间，并单独挂载在一个目录用于蜜罐部署

创建节点
--------
点击左侧导航栏节点下的创建节点，进入创建节点配置页面

页面内的配置项说明如下：

- Install path: 蜜罐在节点上的部署路径，蜜罐相关的文件、日志、镜像都会存储在该目录下

- Node name: 节点名称

- Node description: 节点描述

- Vul type : 要部署的蜜罐类型，可多选。因为不同蜜罐类型可能会使用相同的端口，因此同一行内的蜜罐只能选择其中一种，如 ssh 蜜罐 和 redis_ssh 蜜罐都会使用 22 端口，因此需要只能同时部署一个，其他同理。

选择好后，点击Add 生成部署命令

在蜜罐部署服务器上执行部署命令前，需要确保：

- 系统能够访问外网，并已安装 wget，用于下载部署文件包
- 查看部署蜜罐所需的端口是否已经被占用：因为部署服务器本身会运行着一些服务，常见的如自身的ssh，会占用22端口，如果要部署ssh蜜罐，就必须要修改原本的ssh服务的默认端口，如修改成222。其他蜜罐同理
- 确保蜜罐使用的端口没有被防火墙拦截

确认完后，复制页面中的命令，到服务器上执行即可

若脚本成功执行无任何报错，说明节点环境已经创建成功，但节点内蜜罐还未全部创建成功，因为创建蜜罐需要拉取Image(镜像)，拉取速度取决于网络环境，此时可以在web界面上点击左侧导航栏节点下的查看所有节点，点击进入创建的节点内，即可查看蜜罐部署进度和状态




